{"version":3,"sources":["components/takenPieces/takenPieces.module.css","components/board/square/square.module.css","components/currentPlayer/currentPlayer.module.css","App.module.css","components/board/board.module.css","components/board/square/square.js","utils/utils.js","utils/possibleMoves.js","components/pieces/piece.js","utils/coords.js","utils/selectEmptyRange.js","components/pieces/queen.js","utils/prepareNewBoard.js","utils/isChecked.js","utils/allowedMoves.js","components/board/board.js","utils/selectionIsAllowed.js","components/takenPieces/takenPieces.js","components/currentPlayer/currentPlayer.js","App.js","serviceWorker.js","components/pieces/bishop.js","components/pieces/king.js","components/pieces/knight.js","components/pieces/pawn.js","components/pieces/rook.js","store/reducer.js","utils/initializeBoard.js","index.js"],"names":["module","exports","taken","taken-white","taken-black","figure","number","square","square-light","square-dark","square-selected","square-checked","square-allowed","current-container","current-square","current-black","current-white","game","field","board-container","_ref","url","color","state","clicked","classesArr","classes","concat","push","react_default","a","createElement","className","join","style","backgroundImage","onClick","mapIndexToKey","index","_mapIndexToCoords","mapIndexToCoords","_mapIndexToCoords2","Object","slicedToArray","i","j","String","fromCharCode","mapCoordsToIndex","_ref2","Math","floor","possibleMoves","board","selected","getMoves","filter","id","player","Piece","name","classCallCheck","this","image","firstMove","coords","row","map","column","diagonalX","shiftY","el","onBoardRange","diagonalY","shapeL","around","forward","direction","sides","selectEmptyRange","indicesList","start","slice","indexOf","lastIndexOf","end","length","Queen","possibleConstructorReturn","getPrototypeOf","call","col","toConsumableArray","prepareNewBoard","action","whiteMove","updatedBoard","from","to","isChecked","king","reduce","total","includes","allowedMoves","move","Board","_this","props","endMessage","moves","alert","_this$props","checked","allowed","clickHandler","squareState","board_square_square","key","Component","connect","selectedSquare","checkedSquare","dispatch","type","openSocket","emit","selectionIsAllowed","white","summed","sum","hasOwnProperty","objectSpread","defineProperty","elements","values","_ref3","num","App","components_takenPieces_takenPieces","board_board","components_currentPlayer_currentPlayer","Boolean","window","location","hostname","match","Bishop","King","movement","castlingRight","castlingLeft","Knight","apply","Pawn","capturing","_coords$forward","_coords$forward2","firstSquare","secondSquare","Rook","initialState","initialSetup","a1","b1","c1","d1","e1","f1","g1","h1","a2","b2","c2","d2","e2","f2","g2","h2","a7","b7","c7","d7","e7","f7","g7","h7","a8","b8","c8","d8","e8","f8","g8","h8","Array","fill","initializeBoard","black","reducer","arguments","undefined","updatedTaken","store","createStore","on","ReactDOM","render","es","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4cb95d64.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"taken\":\"takenPieces_taken__EaYaT\",\"taken-white\":\"takenPieces_taken-white__3YiLr\",\"taken-black\":\"takenPieces_taken-black__2e9ox\",\"figure\":\"takenPieces_figure__13VlE\",\"number\":\"takenPieces_number__knijx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"square\":\"square_square__3aaD-\",\"square-light\":\"square_square-light__2Byps\",\"square-dark\":\"square_square-dark__1oFKM\",\"square-selected\":\"square_square-selected__15z7V\",\"square-checked\":\"square_square-checked__1-Vqq\",\"square-allowed\":\"square_square-allowed__bXO7e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"current-container\":\"currentPlayer_current-container__hfQzT\",\"current-square\":\"currentPlayer_current-square__72FGf\",\"current-black\":\"currentPlayer_current-black__1rcxs\",\"current-white\":\"currentPlayer_current-white__u0UHW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"App_game__2Od1p\",\"field\":\"App_field__3kAwM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"board-container\":\"board_board-container__3zE84\"};","import React from 'react';\r\n\r\nimport classes from './square.module.css';\r\n\r\nconst square = ({url, color, state, clicked}) => {\r\n  const classesArr = [classes['square'], classes[`square-${color}`]];\r\n  if (state) classesArr.push(classes[`square-${state}`]);\r\n    \r\n  return <div\r\n    className={classesArr.join(' ')}\r\n    style={{backgroundImage: url}}\r\n    onClick={clicked} />\r\n};\r\n\r\nexport default square;\r\n","export const mapIndexToKey = (index) => {\r\n  const [i, j] = mapIndexToCoords(index);\r\n  return `${String.fromCharCode(97 + j)}${8 - i}`;\r\n};\r\n\r\nexport const mapCoordsToIndex = ([i ,j]) => {\r\n  return i * 8 + j;\r\n};\r\n\r\nexport const mapIndexToCoords = (index) => {\r\n  return [Math.floor(index / 8), index % 8];\r\n};\r\n","export const possibleMoves = (board, selected) => {\r\n  return selected !== null ? board[selected].getMoves(board, selected)\r\n    .filter(id => board[id] ? board[id].player !== board[selected].player : true)\r\n    : [];\r\n};\r\n","export default class Piece {\r\n  constructor(color, url, name) {\r\n    this.player = color;\r\n    this.image = url;\r\n    this.name = name;\r\n    this.firstMove = true;\r\n  }\r\n}\r\n","import { mapCoordsToIndex } from \"./utils\";\r\n\r\nexport const coords = {\r\n  row: i => [[i, 0], [i, 1], [i, 2], [i, 3], [i, 4], [i, 5], [i, 6], [i, 7]]\r\n    .map(mapCoordsToIndex),\r\n  column: j => [[0, j], [1, j], [2, j], [3, j], [4, j], [5, j], [6, j], [7, j]]\r\n    .map(mapCoordsToIndex),\r\n  diagonalX: shiftY => [[0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6], [7, 7]]\r\n    .map(el => [el[0] + shiftY, el[1]])\r\n    .filter(onBoardRange)\r\n    .map(mapCoordsToIndex),\r\n  diagonalY: shiftY => [[0, 7], [1, 6], [2, 5], [3, 4], [4, 3], [5, 2], [6, 1], [7, 0]]\r\n    .map(el => [el[0] + shiftY, el[1]])\r\n    .filter(onBoardRange)\r\n    .map(mapCoordsToIndex),\r\n  shapeL: (i, j) =>\r\n    [[i-2, j-1], [i-2, j+1], [i-1, j-2], [i-1, j+2], [i+1, j-2], [i+1, j+2], [i+2, j-1], [i+2, j+1]]\r\n    .filter(onBoardRange)\r\n    .map(mapCoordsToIndex),\r\n  around: (i, j) =>\r\n    [[i-1, j-1], [i-1, j], [i-1, j+1], [i, j-1], [i, j+1], [i+1, j-1], [i+1, j], [i+1, j+1]]\r\n    .filter(onBoardRange)\r\n    .map(mapCoordsToIndex),\r\n  forward: (i, j, direction) => [[i + direction, j], [i + 2 * direction, j]]\r\n    .filter(onBoardRange)\r\n    .map(mapCoordsToIndex),\r\n  sides: (i, j, direction) => [[i + direction, j + 1], [i + direction, j - 1]]\r\n    .filter(onBoardRange)\r\n    .map(mapCoordsToIndex)\r\n};\r\n\r\nconst onBoardRange = el => (el[0] >= 0 && el[0] <= 7 && el[1] >= 0 && el[1] <= 7);\r\n","export const selectEmptyRange = (indicesList, board, id) => {\r\n  const start = indicesList.slice(0, indicesList.indexOf(id))\r\n    .filter(index => index !== id)\r\n    .map(index => board[index] ? 1 : 0)\r\n    .lastIndexOf(1);\r\n  const end = indicesList.slice(indicesList.indexOf(id) +1 )\r\n    .map(index => board[index] ? 1 : 0)\r\n    .indexOf(1);\r\n\r\n  return indicesList.slice(\r\n    start === -1 ? 0 : start,\r\n    end === -1 ? indicesList.length + 1 : indicesList.indexOf(id) + end + 2\r\n  )\r\n};\r\n","import Piece from './piece';\r\nimport { coords } from '../../utils/coords';\r\nimport { selectEmptyRange } from \"../../utils/selectEmptyRange\";\r\nimport { mapIndexToCoords } from \"../../utils/utils\";\r\n\r\nexport default class Queen extends Piece {\r\n  constructor(color) {\r\n    const url = color === 'white' ?\r\n      'https://upload.wikimedia.org/wikipedia/commons/1/15/Chess_qlt45.svg' :\r\n      'https://upload.wikimedia.org/wikipedia/commons/4/47/Chess_qdt45.svg';\r\n    super(color, url, 'Queen');\r\n  }\r\n\r\n  getMoves(board, id) {\r\n    const [i, j] = mapIndexToCoords(id);\r\n    const row = selectEmptyRange(coords.row(i), board, id);\r\n    const col = selectEmptyRange(coords.column(j), board, id);\r\n    const diagonalX = selectEmptyRange(coords.diagonalX(i - j), board, id);\r\n    const diagonalY = selectEmptyRange(coords.diagonalY(i + j - 7), board, id);\r\n\r\n    return [...row, ...col, ...diagonalX, ...diagonalY];\r\n  }\r\n}\r\n","import Queen from '../components/pieces/queen';\r\n\r\nexport const prepareNewBoard = (state, action) => {\r\n  const player = state.whiteMove ? 'white' : 'black';\r\n  const updatedBoard = [...state.board];\r\n\r\n  updatedBoard[action.from] = null;\r\n\r\n  // Check if pawn should be promoted\r\n  updatedBoard[action.to] = state.board[action.from].name === 'Pawn' && (action.to <= 7 || action.to >= 56) ?\r\n    new Queen(player) : state.board[action.from];\r\n\r\n  // Check for castling\r\n  if (state.board[action.from].name === 'King' && action.from - action.to === 2) {\r\n    updatedBoard[action.from - 4] = null;\r\n    updatedBoard[action.from - 1] = state.board[action.from - 4];\r\n  } else if (state.board[action.from].name === 'King' && action.from - action.to === -2) {\r\n    updatedBoard[action.from + 3] = null;\r\n    updatedBoard[action.from + 1] = state.board[action.from + 3];\r\n  }\r\n\r\n  return updatedBoard;\r\n};\r\n","import { possibleMoves } from './possibleMoves';\r\n\r\nexport const isChecked = (board, king) => {\r\n  return board.map((figure, index) => ({figure, index: index}))\r\n  .filter(square =>\r\n    square.figure && square.figure.player === (king.figure.player === 'white' ? 'black' : 'white'))\r\n    .reduce((total, square) => {\r\n      return [...total, ...possibleMoves(board, square.index)]\r\n    }, [])\r\n    .includes(king.index)\r\n}\r\n","import { possibleMoves } from './possibleMoves';\r\nimport { prepareNewBoard } from './prepareNewBoard';\r\nimport { isChecked } from './isChecked';\r\n\r\nexport const allowedMoves = (state, selected) => {\r\n  return possibleMoves(state.board, selected)\r\n    .filter(move => {\r\n      const updatedBoard = prepareNewBoard(state, {from: selected, to: move});\r\n\r\n      const king = updatedBoard.map((figure, index) => ({figure, index}))\r\n        .filter(square => square.figure && square.figure.player ===\r\n          updatedBoard[move].player && square.figure.name === 'King')[0];\r\n\r\n      return !isChecked(updatedBoard, king);\r\n    })\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect } from  'react-redux';\r\nimport openSocket from \"socket.io-client\";\r\n\r\nimport classes from './board.module.css';\r\nimport Square from './square/square';\r\nimport {mapIndexToCoords, mapIndexToKey} from '../../utils/utils';\r\nimport { selectionIsAllowed } from '../../utils/selectionIsAllowed';\r\nimport { allowedMoves } from '../../utils/allowedMoves';\r\nimport { isChecked } from '../../utils/isChecked';\r\n\r\nclass Board extends Component {\r\n  componentDidUpdate() {\r\n    // Check if game ended\r\n    // TODO:  move into separate component\r\n    const player = this.props.state.whiteMove ? 'white' : 'black'\r\n    const king = this.props.board.map((figure, index) => ({figure, index}))\r\n        .filter(square => square.figure && square.figure.player === player\r\n          && square.figure.name === 'King')[0];\r\n\r\n    const allAllowedMoves = this.props.board.map((figure, index) => ({figure, index}))\r\n      .filter(square => square.figure && square.figure.player === player)\r\n      .reduce((moves, square) => {\r\n        return [...moves, ...allowedMoves(this.props.state, square.index)]\r\n      }, []) ;\r\n\r\n    const endMessage = allAllowedMoves.length === 0 ?\r\n      isChecked(this.props.board, king) ? `Checkmate! ${this.props.state.whiteMove ? 'Black' : 'White'} wins!` : 'Stalemate!'\r\n      : null;\r\n    if (endMessage) alert(endMessage);\r\n  }\r\n\r\n  render() {\r\n    const {state, board, selected, checked, allowed, clickHandler} = this.props;\r\n\r\n    return (\r\n      <div className={classes['board-container']}>\r\n        {board.map((figure, index) => {\r\n          const [i, j] = mapIndexToCoords(index);\r\n\r\n          const squareState = selected === index ? 'selected' :\r\n            allowed.includes(index) ? 'allowed' :\r\n            checked === index ? 'checked' : null;\r\n          return <Square\r\n            key={mapIndexToKey(index)}\r\n            url={figure ? `url(${figure.image})` : 'none'}\r\n            color={(i + j) % 2 === 0 ? 'light' : 'dark'}\r\n            state={squareState}\r\n            clicked={() => clickHandler(state, index)}\r\n          />\r\n        })}\r\n      </div>)\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    state,\r\n    board: state.board,\r\n    selected: state.selectedSquare,\r\n    allowed: state.allowedMoves,\r\n    checked: state.checkedSquare\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    clickHandler: (state, square) => {\r\n      // const action = state.selectedSquare === null ?\r\n      //   selectionIsAllowed(state, square) ?\r\n      //     {type: 'SELECT', id: square} : null\r\n      //   : state.selectedSquare === square ?\r\n      //     {type: 'DESELECT'} :\r\n      //     state.allowedMoves.includes(square) ?\r\n      //       {type: 'MOVE', from: state.selectedSquare, to: square} : null;\r\n      //\r\n      // if (action) dispatch(action);\r\n\r\n      if (state.selectedSquare !== null) {\r\n        if (state.selectedSquare === square) {\r\n          dispatch({type: 'DESELECT'})\r\n        } else {\r\n          if (state.allowedMoves.includes(square)) {\r\n            const socket = openSocket('http://localhost:3001');\r\n            socket.emit('MOVE', {type: 'MOVE', from: state.selectedSquare, to: square});\r\n            // dispatch({type: 'MOVE', from: state.selectedSquare, to: square})\r\n          }\r\n        }\r\n      } else {\r\n        if (selectionIsAllowed(state, square)) {\r\n          dispatch({type: 'SELECT', id: square})\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Board);\r\n","export const selectionIsAllowed = (state, id) => {\r\n  return (\r\n    state.board[id] &&\r\n    (state.board[id].player === 'white') === state.whiteMove\r\n  )\r\n};\r\n","import React from 'react';\r\nimport { connect } from  'react-redux';\r\n\r\nimport classes from './takenPieces.module.css';\r\n\r\nconst takenPieces = ({player, taken}) => {\r\n  const classesArr = [classes['taken'], classes[`taken-${player}`]];\r\n\r\n  const summed = taken[player].length ?\r\n    taken[player].reduce((sum, figure) => {\r\n      return sum.hasOwnProperty(figure.name) ?\r\n        {...sum, [figure.name]: [figure.image, ++sum[figure.name][1]]} :\r\n        {...sum, [figure.name]: [figure.image, 1]}\r\n    }, {}) : {};\r\n\r\n  const elements = Object.values(summed) ? Object.values(summed).map(([url, num], index) =>\r\n    <div key={index}\r\n         className={classes['figure']}\r\n         style={{backgroundImage: `url(${url})`}}>\r\n      {num > 1 ? <div className={classes['number']}>{num}</div> : null}\r\n    </div>) : null;\r\n\r\n  return (\r\n    <div className={classesArr.join(' ')}>\r\n      {elements}\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    taken: state.taken,\r\n    white: state.taken.white\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps)(takenPieces);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport classes from './currentPlayer.module.css';\r\n\r\nconst currentPlayer = ({player}) => {\r\n  const classesArr = [classes['current-square'], classes[`current-${player}`]];\r\n\r\n  return (\r\n    <div className={classes['current-container']}>\r\n      Move: <div className={classesArr.join(' ')} />\r\n    </div>\r\n  )\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    player: state.whiteMove ? 'white' : 'black'\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps)(currentPlayer);","import React, { Component } from 'react';\r\n\r\nimport classes from './App.module.css';\r\nimport Board from './components/board/board';\r\nimport TakenPieces from \"./components/takenPieces/takenPieces\";\r\nimport CurrentPlayer from './components/currentPlayer/currentPlayer';\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div className={classes['game']}>\r\n        <div className={classes['field']}>\r\n          <TakenPieces player='black'/>\r\n          <Board />\r\n          <TakenPieces player='white'/>\r\n        </div>\r\n        <CurrentPlayer />\r\n        {/*<History />*/}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import Piece from './piece';\r\nimport { coords } from '../../utils/coords';\r\nimport { selectEmptyRange } from '../../utils/selectEmptyRange';\r\nimport { mapIndexToCoords } from '../../utils/utils';\r\n\r\nexport default class Bishop extends Piece {\r\n  constructor(color) {\r\n    const url = color === 'white' ?\r\n      'https://upload.wikimedia.org/wikipedia/commons/b/b1/Chess_blt45.svg' :\r\n      'https://upload.wikimedia.org/wikipedia/commons/9/98/Chess_bdt45.svg';\r\n    super(color, url, 'Bishop');\r\n  }\r\n\r\n  getMoves(board, id) {\r\n    const [i, j] = mapIndexToCoords(id);\r\n    const diagonalX = selectEmptyRange(coords.diagonalX(i - j), board, id);\r\n    const diagonalY = selectEmptyRange(coords.diagonalY(i + j - 7), board, id);\r\n\r\n    return [...diagonalX, ...diagonalY];\r\n  }\r\n}\r\n","import Piece from './piece';\r\nimport { coords } from '../../utils/coords';\r\nimport { mapIndexToCoords } from \"../../utils/utils\";\r\n\r\nexport default class King extends Piece {\r\n  constructor(color) {\r\n    const url = color === 'white' ?\r\n      'https://upload.wikimedia.org/wikipedia/commons/4/42/Chess_klt45.svg' :\r\n      'https://upload.wikimedia.org/wikipedia/commons/f/f0/Chess_kdt45.svg';\r\n    super(color, url, 'King');\r\n  }\r\n\r\n  getMoves(board, id) {\r\n    const [i, j] = mapIndexToCoords(id);\r\n    const movement = coords.around(i, j);\r\n    const castlingRight = this.firstMove &&\r\n                          board[id + 3] &&\r\n                          board[id + 3].firstMove &&\r\n                          !board[id + 1] &&\r\n                          !board[id + 2] ?\r\n                          [8 * i + 6] : [];\r\n    const castlingLeft = this.firstMove &&\r\n                         board[id - 4] &&\r\n                         board[id - 4].firstMove &&\r\n                         !board[id - 1] &&\r\n                         !board[id - 2] &&\r\n                         !board[id - 3] ?\r\n                         [8 * i + 2] : [];\r\n\r\n    return [...movement, ...castlingRight, ...castlingLeft];\r\n  }\r\n}\r\n","import Piece from './piece';\r\nimport { coords } from '../../utils/coords';\r\nimport { mapIndexToCoords } from '../../utils/utils';\r\n\r\nexport default class Knight extends Piece {\r\n  constructor(color) {\r\n    const url = color === 'white' ?\r\n      'https://upload.wikimedia.org/wikipedia/commons/7/70/Chess_nlt45.svg' :\r\n      'https://upload.wikimedia.org/wikipedia/commons/e/ef/Chess_ndt45.svg';\r\n    super(color, url, 'Knight');\r\n  }\r\n\r\n  getMoves(board, id) {\r\n    return coords.shapeL(...mapIndexToCoords(id))\r\n  }\r\n}\r\n","import Piece from './piece';\r\nimport { mapIndexToCoords } from \"../../utils/utils\";\r\nimport { coords } from '../../utils/coords';\r\n\r\nexport default class Pawn extends Piece {\r\n  constructor(color) {\r\n    const url = color === 'white' ?\r\n      'https://upload.wikimedia.org/wikipedia/commons/4/45/Chess_plt45.svg' :\r\n      'https://upload.wikimedia.org/wikipedia/commons/c/c7/Chess_pdt45.svg';\r\n    super(color, url, 'Pawn');\r\n  }\r\n\r\n  getMoves(board, id) {\r\n    const [i, j] = mapIndexToCoords(id);\r\n    const direction = this.player === 'black' ? 1 : -1;\r\n\r\n    const capturing = coords.sides(i, j, direction)\r\n      .filter(el => board[el]);\r\n\r\n    const [firstSquare, secondSquare] = coords.forward(i, j, direction);\r\n    const movement = board[firstSquare] ? [] :\r\n      this.firstMove && !board[secondSquare] ? [firstSquare, secondSquare] :\r\n      [firstSquare];\r\n\r\n    return [...capturing, ...movement];\r\n  }\r\n}\r\n","import Piece from './piece';\r\nimport { coords } from '../../utils/coords';\r\nimport { selectEmptyRange } from '../../utils/selectEmptyRange';\r\nimport { mapIndexToCoords } from '../../utils/utils';\r\n\r\nexport default class Rook extends Piece {\r\n  constructor(color) {\r\n    const url = color === 'white' ?\r\n      'https://upload.wikimedia.org/wikipedia/commons/7/72/Chess_rlt45.svg' :\r\n      'https://upload.wikimedia.org/wikipedia/commons/f/ff/Chess_rdt45.svg';\r\n    super(color, url, 'Rook');\r\n  }\r\n\r\n  getMoves(board, id) {\r\n    const [i, j] = mapIndexToCoords(id);\r\n    const row = selectEmptyRange(coords.row(i), board, id);\r\n    const col = selectEmptyRange(coords.column(j), board, id);\r\n\r\n    return [...row, ...col];\r\n  }\r\n}\r\n","import { allowedMoves } from '../utils/allowedMoves';\r\nimport { initializeBoard } from '../utils/initializeBoard';\r\nimport { prepareNewBoard } from '../utils/prepareNewBoard';\r\nimport { isChecked } from '../utils/isChecked';\r\n\r\nconst initialState = {\r\n  board: initializeBoard(),\r\n  taken: {\r\n    black: [],\r\n    white: []\r\n  },\r\n  whiteMove: true,\r\n  selectedSquare: null,\r\n  checkedSquare: null,\r\n  allowedMoves: []\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SELECT':\r\n      return {\r\n        ...state,\r\n        selectedSquare: action.id,\r\n        allowedMoves: allowedMoves(state, action.id)\r\n      };\r\n    case 'DESELECT':\r\n      return {\r\n        ...state,\r\n        selectedSquare: null,\r\n        allowedMoves: []\r\n      };\r\n    case 'MOVE':\r\n      state.board[action.from].firstMove = false;\r\n\r\n      const player = state.whiteMove ? 'white' : 'black';\r\n      const updatedBoard = prepareNewBoard(state, action);\r\n      const updatedTaken = state.board[action.to] ?\r\n        {\r\n          ...state.taken,\r\n          [player]: [...state.taken[player], state.board[action.to]]\r\n        } :\r\n        state.taken;\r\n\r\n      const king = state.board.map((figure, index) => ({figure, index}))\r\n        .filter(square => square.figure && square.figure.player ===\r\n          (player === 'white' ? 'black' : 'white') && square.figure.name === 'King')[0];\r\n\r\n      return {\r\n        ...state,\r\n        board: updatedBoard,\r\n        taken: updatedTaken,\r\n        whiteMove: !state.whiteMove,\r\n        selectedSquare: null,\r\n        allowedMoves: [],\r\n        checkedSquare: isChecked(updatedBoard, king) ? king.index : null\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import Bishop from \"../components/pieces/bishop\";\r\nimport King from \"../components/pieces/king\";\r\nimport Knight from \"../components/pieces/knight\";\r\nimport Pawn from \"../components/pieces/pawn\";\r\nimport Queen from \"../components/pieces/queen\";\r\nimport Rook from \"../components/pieces/rook\";\r\n\r\nimport { mapIndexToKey } from './utils';\r\n\r\nexport const initializeBoard = () => {\r\n  const initialSetup = {\r\n    a1: new Rook('white'),\r\n    b1: new Knight('white'),\r\n    c1: new Bishop('white'),\r\n    d1: new Queen('white'),\r\n    e1: new King('white'),\r\n    f1: new Bishop('white'),\r\n    g1: new Knight('white'),\r\n    h1: new Rook('white'),\r\n    a2: new Pawn('white'),\r\n    b2: new Pawn('white'),\r\n    c2: new Pawn('white'),\r\n    d2: new Pawn('white'),\r\n    e2: new Pawn('white'),\r\n    f2: new Pawn('white'),\r\n    g2: new Pawn('white'),\r\n    h2: new Pawn('white'),\r\n    a7: new Pawn('black'),\r\n    b7: new Pawn('black'),\r\n    c7: new Pawn('black'),\r\n    d7: new Pawn('black'),\r\n    e7: new Pawn('black'),\r\n    f7: new Pawn('black'),\r\n    g7: new Pawn('black'),\r\n    h7: new Pawn('black'),\r\n    a8: new Rook('black'),\r\n    b8: new Knight('black'),\r\n    c8: new Bishop('black'),\r\n    d8: new Queen('black'),\r\n    e8: new King('black'),\r\n    f8: new Bishop('black'),\r\n    g8: new Knight('black'),\r\n    h8: new Rook('black')\r\n  };\r\n\r\n  return Array(64).fill(null)\r\n    .map((el, index) => {\r\n      const key = mapIndexToKey(index);\r\n      return initialSetup.hasOwnProperty(key) ? initialSetup[key] : el;\r\n    });\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport reducer from './store/reducer';\r\n\r\nimport openSocket from \"socket.io-client\";\r\n\r\nconst store = createStore(reducer);\r\n\r\nconst socket = openSocket('http://localhost:3001');\r\nsocket.on('MOVE', (action) => {\r\n  store.dispatch(action);\r\n});\r\n\r\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}